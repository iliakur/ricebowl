# -*- mode: conf-space -*-
#-> ~/.i3/config
# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# General Settings
# ================

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 13
# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8
# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# switch windows smartly
bindsym $mod+space exec --no-startup-id "rofi -show combi -modi combi -combi-modi window,run"



# Windows Inside Workspace
# ========================

# Considered mapping these to home-row keys, but realized I don't use them enough to warrant taking up valuable space.
# As a result they are mapped to arrow keys and home row is reserved for application shortcuts.
# Keeping this variable definition in case I change my mind later.
set $left Left
set $down Down
set $up Up
set $right Right

# Change focus, works in any layout type
bindsym Mod1+Shift+Tab focus prev
bindsym Mod1+Tab focus next
focus_wrapping force

# More specific change focus.
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# Move focused window.
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# Change focus between tiling / floating windows.
bindsym $mod+t focus mode_toggle
# Toggle whether focused window is tiled or floating.
bindsym $mod+Shift+space floating toggle

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym n resize shrink width 10 px or 10 ppt
        bindsym e resize grow height 10 px or 10 ppt
        bindsym i resize shrink height 10 px or 10 ppt
        bindsym o resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $mod+z mode "resize"
# kill focused window
bindsym $mod+Shift+q kill


# Window Layouts
# ==============

# Enter fullscreen mode for the focused container, leave it for pop-up notifications.
bindsym $mod+f fullscreen toggle
popup_during_fullscreen leave_fullscreen

# Default workspace layout
workspace_layout tabbed
# Toggle between the layouts I use most: tabbed and vertical split.
bindsym $mod+l layout toggle tabbed splitv
# For those special occasions that require a horizontal split.
bindsym $mod+h split h
# Hide borders
hide_edge_borders both


# Workspaces
# ==========

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10
# Workspace assignments
workspace 1 output primary DP-1 HDMI-A-0
workspace 2 output eDP-1 eDP
# "Toggle" between 2 consecutively visited workspaces by pressing just one workspace number.
workspace_auto_back_and_forth yes


# Status Bar
# ==========

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
# I used to have the bar hidden unless I press the mod key, but since the status_command process would be put to sleep, my keyboard layout setting wasn't being displayed.
# I should consider having two bars, one with information like keyboard layout and battery status, one with the time and volume percentage.
# The second one could pop up on demand while the first one would be always there.
# For now keeping the simplest option.
bar {
        status_command ~/.local/bin/py3status -c ~/.i3/i3status.conf --dbus-notify --interval 0.3
        position top
        font pango:DejaVu Sans Mono, Awesome 18
        tray_output primary
}


# Startup Programs
# ================

exec --no-startup-id nm-applet
exec --no-startup-id redshift
exec --no-startup-id dunst
exec --no-startup-id feh --bg-max --randomize ~/Pictures/wallpapers/* &
exec --no-startup-id dropbox start
exec --no-startup-id emacs --daemon
exec --no-startup-id ~/bin/ikkbremaps
exec --no-startup-id ~/bin/startvpn
# Monitors for changes in external keyboards and screens.
exec --no-startup-id ~/bin/extmonitor &
# This unifies the xclipboard with the primary selection
# exec --no-startup-id autocutsel -f
# exec --no-startup-id autocutsel -f -s PRIMARY


# Shortcuts for Common Programs
# =============================

bindsym $mod+e exec emacsclient -c --alternate-editor=""
bindsym $mod+i exec firefox
bindsym $mod+Shift+i exec firefox --private-window
bindsym $mod+o exec google-chrome
bindsym $mod+Shift+o exec google-chrome --incognito
bindsym $mod+Return exec --no-startup-id gnome-terminal


# Reload/Exit i3
# ==============

# Exiting without prompt.
bindsym $mod+x exit
# Reload the configuration file.
bindsym $mod+r reload
# Restart i3 inplace (preserves your layout/session, can be used to upgrade i3).
bindsym $mod+Shift+r restart
# Exit i3 (logs you out of your X session).
bindsym $mod+Shift+x exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"


# Lock/Suspend/Shutdown/Restart
# =============================

bindsym Pause exec --no-startup-id i3lock -c 000000 -n
bindsym $mod+Pause exec --no-startup-id systemctl suspend
bindsym $mod+Delete exec --no-startup-id systemctl poweroff
bindsym $mod+Shift+Delete exec --no-startup-id systemctl reboot


# Volume Control
# ==============

bindsym XF86AudioRaiseVolume exec "amixer -q sset Master,0 10%+ unmute"
bindsym XF86AudioLowerVolume exec "amixer -q sset Master,0 10%- unmute"
bindsym XF86AudioMute exec "amixer -q sset Master,0 toggle"
bindsym XF86AudioMicMute exec "amixer -q set Capture toggle"
